(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{254:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var r=n(0),a=n.n(r),o=n(378),c=n(377),s=n(15),i=n.n(s),l=n(9),u=n.n(l),d=n(95),h=n(2),p=n(21),f=n(3),g=n(30),b=n(131),j=n(1),x=function(e){var t=e.navigation,n=Object(r.useState)(3),a=i()(n,2),o=a[0],c=a[1],s=Object(r.useState)(""),l=i()(s,2),h=l[0],x=l[1],O=Object(r.useState)([]),y=i()(O,2),v=y[0],w=y[1],C=Object(r.useState)([]),S=i()(C,2),k=S[0],A=S[1],_=function(e){if(e){c(0);var t=k.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));w(t),x(e)}else c(3),w(k),x(e)};Object(r.useEffect)((function(){var e=setInterval((function(){D()}),1e3);return function(){clearInterval(e)}}));var D=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:0==o||(1==o?P():c(o-1));case 1:case"end":return e.stop()}}),null,null,null,Promise)},P=function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_and_log.php"));case 3:return e=n.sent,n.next=6,u.a.awrap(e.json());case 6:t=n.sent,w(t),A(t),c(3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0),c(3);case 16:case"end":return n.stop()}}),null,null,[[0,12]],Promise)};return Object(j.jsxs)(f.a,{style:m.container,children:[Object(j.jsx)(b.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return _(e)},onClear:function(e){return _("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:h}),Object(j.jsx)(d.a,{ItemSeparatorComponent:function(){return Object(j.jsx)(f.a,{style:m.listItemSeparatorStyle})},sections:[{data:v}],renderItem:function(e){var n=e.item;return Object(j.jsxs)(f.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(j.jsx)(g.a,{source:{uri:n.displayimage},style:m.Img}),Object(j.jsxs)(p.a,{style:m.sectionListItemStyle,onPress:function(){return function(e,n,r,a){var o,c;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return o={shopcode:n,chatname:r,status:"read"},s.prev=1,s.next=4,u.a.awrap(fetch("https://school.treesbot.com/pepsichat/update_chat_log_web.php",{method:"POST",body:JSON.stringify(o)}));case 4:return c=s.sent,s.next=7,u.a.awrap(c.json());case 7:s.sent,s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),console.error(s.t0);case 13:t.navigate("Chat",{shopname:e,shopcode:n,chatname:r,menu:a});case 14:case"end":return s.stop()}}),null,null,[[1,10]],Promise)}(n.shopname,n.shopcode,n.chatname,n.menu)},children:[n.shopcode," (",n.shopname,")"]}),Object(j.jsx)(p.a,{style:{textAlign:"center",backgroundColor:n.chatcolor,fontSize:10,padding:5,marginTop:5,color:"#fff",height:20,width:20,borderRadius:10},children:n.chatcount})]})},keyExtractor:function(e,t){return t}})]})},m=h.a.create({Img:{height:50,width:50,borderRadius:25},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},titleText:{textAlign:"center",backgroundColor:"#0089FC",fontSize:20,padding:5,color:"#fff",height:40},notiText:{textAlign:"center",backgroundColor:"red",fontSize:10,padding:5,marginTop:5,marginRight:5,color:"#fff",height:20,width:20,borderRadius:10},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},button:{justifyContent:"center",width:250,height:40,borderRadius:10}}),O=n(5),y=n.n(O),v=n(23),w=n.n(v),C=n(109),S=n(99),k=(n(318),n(358),n(356),(0===S.a.apps.length?S.a.initializeApp({apiKey:"AIzaSyDBCB00CkxHXwiAxqtj369EKv5M5OCgslc",authDomain:"pepsi-coolerfan-chat-2d9ab.firebaseapp.com",databaseURL:"gs://pepsi-coolerfan-chat-2d9ab.appspot.com",projectId:"pepsi-coolerfan-chat-2d9ab",storageBucket:"pepsi-coolerfan-chat-2d9ab.appspot.com",messagingSenderId:"967346529141",appId:"1:967346529141:web:87311021ef0ced75a9e93c"}):S.a.app()).firestore()),A=(S.a.auth(),S.a.storage()),_=n(111),D=n(379),P=n(59);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){var t=e.route,n=e.navigation,a=Object(r.useState)([]),o=i()(a,2),c=o[0],s=o[1],l=t.params,d=l.shopname,h=l.shopcode,g=l.chatname,b=l.menu,x=Object(r.useState)(3),m=i()(x,2),O=m[0],y=m[1];Object(r.useEffect)((function(){var e=k.collection(g).orderBy("createdAt","desc").onSnapshot((function(e){s(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video,received:e.data().received}})))}));return function(){return e}}),[]),Object(r.useEffect)((function(){var e=setInterval((function(){v()}),1e3);return function(){clearInterval(e)}}));var v=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:0==O||(1==O?S():y(O-1));case 1:case"end":return e.stop()}}),null,null,null,Promise)},S=function(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={shopcode:h,chatname:g,status:"read"},n.prev=1,n.next=4,u.a.awrap(fetch("https://school.treesbot.com/pepsichat/update_chat_log_web.php",{method:"POST",body:JSON.stringify(e)}));case 4:return t=n.sent,n.next=7,u.a.awrap(t.json());case 7:n.sent,k.collection(g).where("user._id","==",h).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),y(3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),y(3),console.error(n.t0);case 16:case"end":return n.stop()}}),null,null,[[1,12]],Promise)},T=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Z(g,b);var t=e[0],n=t._id,r=t.createdAt,a=t.text,o=t.user;t.received;k.collection(g).add({_id:n,createdAt:r,text:a,user:o,received:!1})}),[]),R=Object(r.useState)([]),F=i()(R,2),M=F[0],L=F[1],E=Object(r.useState)([]),N=i()(E,2),z=N[0],V=N[1],W=Object(r.useState)([]),B=i()(W,2),J=(B[0],B[1]),q=Object(r.useState)(0),G=i()(q,2),H=(G[0],G[1]),K=function(){var e,t,n,r,a,o,c,s;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=(new Date).getDate(),t=(new Date).getMonth()+1,n=(new Date).getFullYear(),r=(new Date).getHours(),a=(new Date).getMinutes(),o=(new Date).getSeconds(),c="admin_"+n+t+e+r+a+o,s=[],M.map((function(e){var t=A.ref("images/"+c).put(e);s.push(t),t.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);H(t)}),(function(e){console.log(e)}),(function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(A.ref("images").child(c).getDownloadURL().then((function(e){Y(e),J((function(t){return[].concat(w()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)},Y=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},image:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,c=t.image;k.collection(g).add({_id:n,createdAt:r,text:a,user:o,image:c,received:!1}),Z(g,b)},X=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},video:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,c=t.video;k.collection(g).add({_id:n,createdAt:r,text:a,user:o,video:c,received:!1}),Z(g,b)},Z=function(e,t){var n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={shopcode:"admin",chatname:e,menu:t,status:"unread"},a.prev=1,a.next=4,u.a.awrap(fetch("https://school.treesbot.com/pepsichat/insert_chat_log.php",{method:"POST",body:JSON.stringify(n)}));case 4:return r=a.sent,a.next=7,u.a.awrap(r.json());case 7:a.sent[0].Message,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)},Q=function(){var e,t;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e={chatname:g,status:"no"},r.prev=1,r.next=4,u.a.awrap(fetch("https://school.treesbot.com/pepsichat/close_chat.php",{method:"POST",body:JSON.stringify(e)}));case 4:return t=r.sent,r.next=7,u.a.awrap(t.json());case 7:"Complete"==r.sent[0].Message&&(console.log("fofonn Complete"),n.dispatch(P.b.goBack())),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),alert(r.t0),console.error(r.t0);case 15:case"end":return r.stop()}}),null,null,[[1,11]],Promise)};return Object(j.jsxs)(f.a,{style:{flex:1,backgroundColor:"lightgray"},children:[Object(j.jsxs)(f.a,{style:{flexDirection:"row",height:40,padding:0},children:[Object(j.jsx)(f.a,{style:{backgroundColor:"#0089FC",flex:3},children:Object(j.jsx)(p.a,{style:U.titleText,children:d})}),Object(j.jsx)(f.a,{style:{backgroundColor:"#0089FC",flex:.5},children:Object(j.jsx)(C.a,{title:"\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",style:U.button,color:"blue",onPress:function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32 "+d)&&(console.log("fofonn submit"),Q());case 2:case"end":return e.stop()}}),null,null,null,Promise)}})})]}),Object(j.jsx)(_.b,{messages:c,showAvatarForEveryMessage:!0,renderBubble:function(e){return Object(j.jsx)(_.a,I(I({},e),{},{tickStyle:{color:e.currentMessage.received?"#00FF00":"#454545"},timeTextStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},textStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},wrapperStyle:{right:{backgroundColor:"rgba(0,102,204,1)",borderRadius:15},left:{backgroundColor:"rgb(255,255,255)",borderRadius:15}},quickReplyStyle:{color:"rgba(0,102,204,1)",borderWidth:2,borderRadius:30,backgroundColor:"rgb(255,255,255)"}}))},renderMessageVideo:function(e){var t=e.currentMessage;return Object(j.jsx)(f.a,{style:{position:"relative",height:150,width:250},children:Object(j.jsx)(D.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video}})})},onSend:function(e){return T(e)},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"}}),Object(j.jsxs)(f.a,{style:{flexDirection:"row",height:25,padding:0,marginLeft:20},children:[Object(j.jsx)(f.a,{style:{backgroundColor:"lightgray"},children:Object(j.jsxs)("div",{style:{textAlign:"right",marginRight:10},children:[Object(j.jsx)("input",{type:"file",id:"upload-file",hidden:!0,onChange:function(e){L([]),J([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),L((function(e){return[].concat(w()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},onDrop:K,accept:"image/*"}),Object(j.jsx)("label",{for:"upload-file",children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e"})]})}),Object(j.jsx)(f.a,{style:{backgroundColor:"lightgray"},children:Object(j.jsx)("div",{children:Object(j.jsx)("button",{style:{backgroundColor:"rgba(0,102,204,1)",borderRadius:10,color:"#fff",marginRight:10},onClick:K,children:"\u0e2a\u0e48\u0e07\u0e23\u0e39\u0e1b"})})}),Object(j.jsx)(f.a,{style:{backgroundColor:"lightgray"},children:Object(j.jsxs)("div",{style:{textAlign:"right",marginRight:10},children:[Object(j.jsx)("input",{type:"file",id:"upload-file-video",hidden:!0,onChange:function(e){V([]),J([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),V((function(e){return[].concat(w()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"video/*"}),Object(j.jsx)("label",{for:"upload-file-video",children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})]})}),Object(j.jsx)(f.a,{style:{backgroundColor:"lightgray"},children:Object(j.jsx)("div",{children:Object(j.jsx)("button",{style:{backgroundColor:"rgba(0,102,204,1)",borderRadius:10,color:"#fff",marginRight:10},onClick:function(){var e,t,n,r,a,o,c,s;return u.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=[],t=(new Date).getDate(),n=(new Date).getMonth()+1,r=(new Date).getFullYear(),a=(new Date).getHours(),o=(new Date).getMinutes(),c=(new Date).getSeconds(),s="admin_"+r+n+t+a+o+c,z.map((function(t){var n=A.ref("videos/"+s).put(t);e.push(n),n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);H(t)}),(function(e){console.log(e)}),(function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(A.ref("videos").child(s).getDownloadURL().then((function(e){X(e),J((function(t){return[].concat(w()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)},children:"\u0e2a\u0e48\u0e07\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})})})]})]})},U=h.a.create({Img:{height:50,width:50,borderRadius:25},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},titleText:{textAlign:"center",backgroundColor:"#0089FC",fontSize:20,padding:5,color:"#fff",height:40},notiText:{textAlign:"center",backgroundColor:"red",fontSize:10,padding:5,marginTop:5,marginRight:5,color:"#fff",height:20,width:20,borderRadius:10},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},button:{justifyContent:"center",width:250,height:40,borderRadius:10}}),F=function(e){var t=e.navigation;return Object(j.jsxs)(f.a,{style:M.container,children:[Object(j.jsx)(g.a,{source:n(330),resizeMode:"contain",style:M.logo1}),Object(j.jsxs)(f.a,{style:[M.containerrow,{flexDirection:"row"}],children:[Object(j.jsx)(C.a,{title:"Live Chat",style:M.button,color:"#EE0000",onPress:function(){return t.navigate("Group")}}),"\xa0 \xa0 \xa0 \xa0",Object(j.jsx)(C.a,{title:"History",style:M.button,color:"#EE0000",width:"250",height:"100",onPress:function(){return t.navigate("History")}})]})]})},M=h.a.create({button:{width:250,height:100,marginTop:20},container:{flex:1,backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},containerrow:{backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},logo1:{height:150,width:220}}),L=n(247),E=n(58),N=n(132),z=n(94),V=n(380),W=n(115),B=n(242),J=n.n(B),q=n(243),G=n(148),H=function(e){var t=e.apiData,n=e.fileName;return Object(j.jsx)("button",{onClick:function(e){return function(e,t){var n={Sheets:{data:G.a.json_to_sheet(e)},SheetNames:["data"]},r=G.b(n,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});q.saveAs(a,t+".xlsx")}(t,n)},style:{backgroundColor:"#145A32",height:40,borderRadius:10,color:"#ffffff"},children:"Download Excel"})},K=function(e){e.navigation;var t=Object(r.useState)(!1),n=i()(t,2),o=n[0],c=n[1],s=Object(r.useState)([]),l=i()(s,2),h=l[0],x=l[1],m=Object(r.useState)(""),O=i()(m,2),y=O[0],v=O[1],w=Object(r.useState)(""),C=i()(w,2),S=C[0],A=C[1],P=Object(r.useState)(""),T=i()(P,2),I=T[0],R=T[1],U=Object(r.useState)(""),F=i()(U,2),M=(F[0],F[1]),B=Object(r.useState)(""),q=i()(B,2),G=q[0],K=q[1],X=Object(r.useState)(""),Z=i()(X,2),Q=Z[0],$=Z[1],ee=Object(r.useState)(""),te=i()(ee,2),ne=(te[0],te[1]),re=Object(r.useState)(""),ae=i()(re,2),oe=(ae[0],ae[1]),ce="",se=Object(r.useState)(""),ie=i()(se,2),le=ie[0],ue=ie[1],de=Object(r.useState)([]),he=i()(de,2),pe=he[0],fe=he[1],ge=Object(r.useState)([]),be=i()(ge,2),je=be[0],xe=be[1],me=Object(r.useState)([]),Oe=i()(me,2),ye=Oe[0],ve=Oe[1],we=Object(r.useState)([]),Ce=i()(we,2),Se=Ce[0],ke=Ce[1],Ae=Object(r.useState)([]),_e=i()(Ae,2),De=_e[0],Pe=_e[1],Te=Object(r.useState)([]),Ie=i()(Te,2),Re=Ie[0],Ue=Ie[1],Fe=Object(r.useState)([]),Me=i()(Fe,2),Le=Me[0],Ee=Me[1],Ne=Object(r.useState)([]),ze=i()(Ne,2),Ve=ze[0],We=ze[1],Be=Object(r.useState)([]),Je=i()(Be,2),qe=Je[0],Ge=Je[1],He=Object(r.useState)([]),Ke=i()(He,2),Ye=Ke[0],Xe=Ke[1],Ze=Object(r.useState)([]),Qe=i()(Ze,2),$e=Qe[0],et=Qe[1],tt=Object(r.useState)([]),nt=i()(tt,2),rt=nt[0],at=nt[1],ot=a.a.useState([]),ct=i()(ot,2),st=ct[0],it=ct[1];a.a.useEffect((function(){J.a.get("https://school.treesbot.com/pepsichat/export_chat_all.php").then((function(e){return it(e.data)}))}),[]);var lt=function(e){var t,n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={menu:e},a.prev=1,a.next=4,u.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_menu.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,u.a.awrap(n.json());case 7:r=a.sent,"group1"==e?(fe(r),xe(r),ht(r[0].displayimage,r[0].shopname,r[0].shopcode,r[0].tell,r[0].address,r[0].chatname,r[0].menu),jt(r[0].shopcode)):"group2"==e?(ve(r),ke(r)):"group3"==e?(Pe(r),Ue(r)):"group4"==e?(Ee(r),We(r)):"group5"==e?(Ge(r),Xe(r)):""==e&&(et(r),at(r)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)};Object(r.useEffect)((function(){lt("group1"),lt("group2"),lt("group3"),lt("group4"),lt("group5"),lt("")}),[]);var ut=function(e){if(e){var t=je.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),n=Se.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),r=Re.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),a=Ve.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),o=Ye.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),c=rt.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));fe(t),ve(n),Pe(r),Ee(a),Ge(o),et(c),ue(e)}else fe(je),ve(Se),Pe(Re),Ee(Ve),Ge(Ye),et(rt),ue(e)},dt=function(e){ce=e,c(!0),function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=k.collection(ce).orderBy("createdAt","desc").onSnapshot((function(e){return x(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video}})))})),t.abrupt("return",(function(){return e}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}()};var ht=function(e,t,n,r,a,o,c){ce=o,v(n+" ("+t+")"),A(e),M(t),R(n),K(r),$(a),ne(o),oe(c),jt(n)},pt=Object(r.useState)([]),ft=i()(pt,2),gt=ft[0],bt=ft[1],jt=function(e){var t,n,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={shopcode:e},a.prev=1,a.next=4,u.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_shopcode.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,u.a.awrap(n.json());case 7:r=a.sent,bt(r),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)},xt=function(e){var t="";return"group1"==e?t="\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48":"group2"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25":"group3"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46":"group4"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b":"group5"==e?t="\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a":""==e&&(t="\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32"),t};return Object(j.jsxs)(f.a,{style:[Y.container,{flexDirection:"row"}],children:[Object(j.jsxs)(f.a,{style:Y.container,children:[Object(j.jsx)(H,{apiData:st,fileName:"Export_Chat_Report"}),Object(j.jsx)(b.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return ut(e)},onClear:function(e){return ut("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:le}),Object(j.jsx)(d.a,{ItemSeparatorComponent:function(){return Object(j.jsx)(f.a,{style:Y.listItemSeparatorStyle})},sections:[{title:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48",data:pe},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25",data:ye},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46",data:De},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b",data:Le},{title:"\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a",data:qe},{title:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32",data:$e}],renderSectionHeader:function(e){var t=e.section;return Object(j.jsxs)(p.a,{style:Y.groupText,children:[" ",t.title," "]})},renderItem:function(e){var t=e.item;return Object(j.jsxs)(f.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(j.jsx)(g.a,{source:{uri:t.displayimage},style:Y.Img}),Object(j.jsxs)(p.a,{style:Y.sectionListItemStyle,onPress:function(){return ht(t.displayimage,t.shopname,t.shopcode,t.tell,t.address,t.chatname,t.menu)},children:[t.shopcode," (",t.shopname,")"]})]})},keyExtractor:function(e,t){return t}})]}),Object(j.jsxs)(f.a,{style:{flex:2,backgroundColor:"#0089FC"},children:[Object(j.jsx)(E.a,{animationType:"slide",transparent:!0,visible:o,onRequestClose:function(){L.a.alert("Modal has been closed."),c(!o)},children:Object(j.jsx)(f.a,{style:Y.centeredView,children:Object(j.jsxs)(f.a,{style:Y.modalView,children:[Object(j.jsx)(_.b,{messages:h,showAvatarForEveryMessage:!0,renderMessageVideo:function(e){var t=e.currentMessage;return Object(j.jsx)(f.a,{style:{position:"relative",height:150,width:250},children:Object(j.jsx)(D.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video},style:Y.video})})},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},renderInputToolbar:function(){return null}}),Object(j.jsx)(N.a,{style:[Y.button,Y.buttonClose],onPress:function(){return c(!o)},children:Object(j.jsx)(p.a,{style:Y.textStyle,children:"\u0e1b\u0e34\u0e14"})})]})})}),Object(j.jsxs)(f.a,{style:{backgroundColor:"white",flexDirection:"row",height:150,padding:0,borderRadius:20,marginTop:20,marginLeft:20,marginRight:20},children:[Object(j.jsx)(f.a,{style:{flex:1},children:Object(j.jsx)(g.a,{source:{uri:S},style:Y.Img2})}),Object(j.jsxs)(f.a,{style:{flex:2},children:[Object(j.jsx)(p.a,{style:Y.titleText,children:Object(j.jsx)("b",{children:y})}),Object(j.jsxs)(p.a,{style:Y.titleText,children:["\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32 : ",I]}),Object(j.jsxs)(p.a,{style:Y.titleText,children:["\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d : ",G]}),Object(j.jsxs)(p.a,{style:Y.titleText,children:["\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48 : ",Q]})]})]}),Object(j.jsx)(f.a,{style:{backgroundColor:"white",flexDirection:"row",borderRadius:20,marginTop:10,marginLeft:20,marginRight:20,marginBottom:10},children:Object(j.jsxs)(V.a,{children:[Object(j.jsxs)(V.a.Header,{children:[Object(j.jsx)(V.a.Title,{style:{flex:1},children:"No"}),Object(j.jsx)(V.a.Title,{style:{flex:2},children:"Date"}),Object(j.jsx)(V.a.Title,{style:{flex:3},children:"Message"}),Object(j.jsx)(V.a.Title,{style:{flex:1},children:"Action"})]}),Object(j.jsx)(z.a,{data:gt,renderItem:function(e){var t=e.item;return Object(j.jsxs)(V.a.Row,{children:[Object(j.jsx)(V.a.Cell,{style:{flex:1},children:t.num}),Object(j.jsx)(V.a.Cell,{style:{flex:2},children:t.dateinsert}),Object(j.jsx)(V.a.Cell,{style:{flex:3},children:xt(t.menu)}),Object(j.jsx)(V.a.Cell,{style:{flex:1},children:Object(j.jsx)(W.a,{icon:"eye",color:"blue",size:20,onPress:function(){return dt(t.chatname)}})})]})}})]})})]})]})},Y=h.a.create({Img:{height:50,width:50,borderRadius:25},Img2:{marginTop:25,marginLeft:50,height:100,width:100,borderRadius:75},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},container2:{backgroundColor:"white",height:400,width:600},groupText:{backgroundColor:"gray",fontSize:18,padding:5,color:"white"},titleText:{fontSize:16,padding:5,color:"black"},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},centeredView:{flex:1,justifyContent:"center",alignItems:"center",marginTop:22},modalView:{flex:1,margin:20,backgroundColor:"white",borderRadius:20,width:500,height:500,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{borderRadius:20,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{marginBottom:15,textAlign:"center"}}),X=Object(o.a)();function Z(){return Object(j.jsx)(c.a,{children:Object(j.jsxs)(X.Navigator,{screenOptions:{headerTitleAlign:"center"},children:[Object(j.jsx)(X.Screen,{name:"Menu",component:F}),Object(j.jsx)(X.Screen,{name:"Group",component:x}),Object(j.jsx)(X.Screen,{name:"Chat",component:R}),Object(j.jsx)(X.Screen,{name:"History",component:K})]})})}},261:function(e,t,n){e.exports=n(354)},330:function(e,t,n){e.exports=n.p+"static/media/Pepsi-Logo.32560c85.png"}},[[261,1,2]]]);
//# sourceMappingURL=app.3c124913.chunk.js.map