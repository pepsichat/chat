(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{254:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var r=n(0),a=n.n(r),o=n(378),c=n(377),s=n(5),i=n.n(s),l=n(23),u=n.n(l),d=n(14),h=n.n(d),p=n(9),f=n.n(p),b=n(95),g=n(2),j=n(21),x=n(3),O=n(30),m=n(109),v=n(99),y=(n(270),n(358),n(356),(0===v.a.apps.length?v.a.initializeApp({apiKey:"AIzaSyDBCB00CkxHXwiAxqtj369EKv5M5OCgslc",authDomain:"pepsi-coolerfan-chat-2d9ab.firebaseapp.com",databaseURL:"gs://pepsi-coolerfan-chat-2d9ab.appspot.com",projectId:"pepsi-coolerfan-chat-2d9ab",storageBucket:"pepsi-coolerfan-chat-2d9ab.appspot.com",messagingSenderId:"967346529141",appId:"1:967346529141:web:87311021ef0ced75a9e93c"}):v.a.app()).firestore()),w=(v.a.auth(),v.a.storage()),S=n(111),C=n(131),k=n(379),_=n(1);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){e.navigation;var t=Object(r.useState)([]),n=h()(t,2),a=n[0],o=n[1],c=Object(r.useState)(""),s=h()(c,2),i=s[0],l=s[1],d=Object(r.useState)(""),p=h()(d,2),g=p[0],v=p[1],P=Object(r.useState)(""),D=h()(P,2),I=(D[0],D[1]),U=Object(r.useState)(""),R=h()(U,2),M=R[0],F=R[1],E=Object(r.useState)(""),L=h()(E,2),N=L[0],V=L[1],z=Object(r.useState)(3),W=h()(z,2),J=W[0],q=W[1],B="",G="",H="",K=Object(r.useState)(""),Y=h()(K,2),X=Y[0],Z=Y[1],Q=Object(r.useState)([]),$=h()(Q,2),ee=$[0],te=$[1],ne=Object(r.useState)([]),re=h()(ne,2),ae=re[0],oe=re[1],ce=function(){var e,t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return te(""),oe(""),n.prev=2,n.next=5,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_and_log.php"));case 5:return e=n.sent,n.next=8,f.a.awrap(e.json());case 8:t=n.sent,te(t),oe(t),console.log("fofonn getUser2"),fe(t[0].shopname,t[0].shopcode,t[0].chatname,t[0].menu),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),console.log("fofonn getUser3"),console.error(n.t0);case 19:case"end":return n.stop()}}),null,null,[[2,15]],Promise)},se=function(e){if(e){q(0);var t=ae.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));te(t),Z(e)}else q(3),te(ae),Z(e)},ie=function(e){var t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={chatname:e,status:"no"},r.prev=1,r.next=4,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/close_chat.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=r.sent,r.next=7,f.a.awrap(n.json());case 7:"Complete"==r.sent[0].Message&&(console.log("fofonn Complete"),ce()),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(1),alert(r.t0),console.error(r.t0);case 15:case"end":return r.stop()}}),null,null,[[1,11]],Promise)},le=function(e,t){var n,r;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n={shopcode:"admin",chatname:e,menu:t,status:"unread"},a.prev=1,a.next=4,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/insert_chat_log.php",{method:"POST",body:JSON.stringify(n)}));case 4:return r=a.sent,a.next=7,f.a.awrap(r.json());case 7:a.sent[0].Message,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)};Object(r.useEffect)((function(){var e=setInterval((function(){ue()}),1e3);return function(){clearInterval(e)}}));var ue=function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:0==J||(1==J?de():q(J-1));case 1:case"end":return e.stop()}}),null,null,null,Promise)},de=function(){var e,t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_and_log.php"));case 3:return e=n.sent,n.next=6,f.a.awrap(e.json());case 6:t=n.sent,te(t),oe(t),he(),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0),q(3);case 16:case"end":return n.stop()}}),null,null,[[0,12]],Promise)},he=function(){var e,t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={shopcode:g,chatname:M,status:"read"},n.prev=1,n.next=4,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/update_chat_log_web.php",{method:"POST",body:JSON.stringify(e)}));case 4:return t=n.sent,n.next=7,f.a.awrap(t.json());case 7:n.sent,y.collection(M).where("user._id","==",g).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),q(3),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),q(3),console.error(n.t0);case 16:case"end":return n.stop()}}),null,null,[[1,12]],Promise)},pe=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;le(t,n);var r=e[0],a=r._id,o=r.createdAt,c=r.text,s=r.user;r.received;y.collection(t).add({_id:a,createdAt:o,text:c,user:s,received:!1})}),[]),fe=function(e,t,n,r){G=n,B=t,H=r,l(t+" ("+e+")"),F(G),v(B),I(e),V(H),console.log("fofonn onPressTitle"),be(t,G)},be=function(e,t){var n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("fofonn readUser"),y.collection(t).where("user._id","==",e).get().then((function(e){e.forEach((function(e){e.ref.update({received:!0})}))})),n=y.collection(t).orderBy("createdAt","desc").onSnapshot((function(e){return o(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video,received:e.data().received}})))})),r.abrupt("return",(function(){return n}));case 4:case"end":return r.stop()}}),null,null,null,Promise)},ge=Object(r.useState)([]),je=h()(ge,2),xe=je[0],Oe=je[1],me=Object(r.useState)([]),ve=h()(me,2),ye=ve[0],we=ve[1],Se=Object(r.useState)([]),Ce=h()(Se,2),ke=(Ce[0],Ce[1]),_e=Object(r.useState)(0),Pe=h()(_e,2),Ae=(Pe[0],Pe[1]),De=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},image:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,c=t.image;y.collection(M).add({_id:n,createdAt:r,text:a,user:o,image:c,received:!1}),le(M,N)},Te=function(e){var t={_id:Math.random().toString(36).substring(7),text:"",createdAt:new Date,user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},video:e},n=t._id,r=t.createdAt,a=t.text,o=t.user,c=t.video;y.collection(M).add({_id:n,createdAt:r,text:a,user:o,video:c,received:!1}),le(M,N)};return Object(_.jsxs)(x.a,{style:[T.container,{flexDirection:"row"}],children:[Object(_.jsxs)(x.a,{style:T.container,children:[Object(_.jsx)(C.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return se(e)},onClear:function(e){return se("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:X}),Object(_.jsx)(b.a,{ItemSeparatorComponent:function(){return Object(_.jsx)(x.a,{style:T.listItemSeparatorStyle})},sections:[{data:ee}],renderItem:function(e){var t=e.item;return Object(_.jsxs)(x.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(_.jsx)(O.a,{source:{uri:t.displayimage},style:T.Img}),Object(_.jsxs)(j.a,{style:T.sectionListItemStyle,onPress:function(){return function(e,t,n,r){var a,o;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a={shopcode:t,chatname:n,status:"read"},c.prev=1,c.next=4,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/update_chat_log_web.php",{method:"POST",body:JSON.stringify(a)}));case 4:return o=c.sent,c.next=7,f.a.awrap(o.json());case 7:c.sent,c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),console.error(c.t0);case 13:fe(e,t,n,r);case 14:case"end":return c.stop()}}),null,null,[[1,10]],Promise)}(t.shopname,t.shopcode,t.chatname,t.menu)},children:[t.shopcode," (",t.shopname,")"]}),Object(_.jsx)(j.a,{style:{textAlign:"center",backgroundColor:t.chatcolor,fontSize:10,padding:5,marginTop:5,color:"#fff",height:20,width:20,borderRadius:10},children:t.chatcount})]})},keyExtractor:function(e,t){return t}})]}),Object(_.jsxs)(x.a,{style:{flex:2,backgroundColor:"lightgray"},children:[Object(_.jsxs)(x.a,{style:{flexDirection:"row",height:40,padding:0},children:[Object(_.jsx)(x.a,{style:{backgroundColor:"#0089FC",flex:3},children:Object(_.jsx)(j.a,{style:T.titleText,children:i})}),Object(_.jsx)(x.a,{style:{backgroundColor:"#0089FC",flex:.5},children:Object(_.jsx)(m.a,{title:"\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32",style:T.button,color:"blue",onPress:function(){return e=M,f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:window.confirm("\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e1b\u0e34\u0e14\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32 "+i)&&(console.log("fofonn submit"),ie(e));case 2:case"end":return t.stop()}}),null,null,null,Promise);var e}})})]}),Object(_.jsx)(S.b,{messages:a,showAvatarForEveryMessage:!0,renderBubble:function(e){return Object(_.jsx)(S.a,A(A({},e),{},{tickStyle:{color:e.currentMessage.received?"#00FF00":"#454545"},timeTextStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},textStyle:{right:{color:"rgb(255,255,255)"},left:{color:"rgb(0,0,0)"}},wrapperStyle:{right:{backgroundColor:"rgba(0,102,204,1)",borderRadius:15},left:{backgroundColor:"rgb(255,255,255)",borderRadius:15}},quickReplyStyle:{color:"rgba(0,102,204,1)",borderWidth:2,borderRadius:30,backgroundColor:"rgb(255,255,255)"}}))},renderMessageVideo:function(e){var t=e.currentMessage;return Object(_.jsx)(x.a,{style:{position:"relative",height:150,width:250},children:Object(_.jsx)(k.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video}})})},onSend:function(e){return pe(e,M,H)},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"}}),Object(_.jsxs)(x.a,{style:{flexDirection:"row",height:25,padding:0},children:[Object(_.jsx)(x.a,{style:{backgroundColor:"lightgray",flex:2},children:Object(_.jsxs)("div",{children:[Object(_.jsx)("input",{type:"file",id:"upload-file",hidden:!0,onChange:function(e){Oe([]),ke([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),Oe((function(e){return[].concat(u()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"image/*"}),Object(_.jsx)("label",{for:"upload-file",children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e"})]})}),Object(_.jsx)(x.a,{style:{backgroundColor:"lightgray",flex:.5},children:Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){var e,t,n,r,a,o,c,s;return f.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=(new Date).getDate(),t=(new Date).getMonth()+1,n=(new Date).getFullYear(),r=(new Date).getHours(),a=(new Date).getMinutes(),o=(new Date).getSeconds(),c="admin_"+n+t+e+r+a+o,s=[],xe.map((function(e){var t=w.ref("images/"+c).put(e);s.push(t),t.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Ae(t)}),(function(e){console.log(e)}),(function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(w.ref("images").child(c).getDownloadURL().then((function(e){De(e),ke((function(t){return[].concat(u()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)},children:"\u0e2a\u0e48\u0e07\u0e23\u0e39\u0e1b"})})}),Object(_.jsx)(x.a,{style:{backgroundColor:"lightgray",flex:2},children:Object(_.jsxs)("div",{children:[Object(_.jsx)("input",{type:"file",id:"upload-file-video",hidden:!0,onChange:function(e){we([]),ke([]);for(var t=function(t){var n=e.target.files[t];n.id=Math.random(),we((function(e){return[].concat(u()(e),[n])}))},n=0;n<e.target.files.length;n++)t(n)},accept:"video/*"}),Object(_.jsx)("label",{for:"upload-file-video",children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})]})}),Object(_.jsx)(x.a,{style:{backgroundColor:"lightgray",flex:.5},children:Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){var e,t,n,r,a,o,c,s;return f.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:e=[],t=(new Date).getDate(),n=(new Date).getMonth()+1,r=(new Date).getFullYear(),a=(new Date).getHours(),o=(new Date).getMinutes(),c=(new Date).getSeconds(),s="admin_"+r+n+t+a+o+c,ye.map((function(t){var n=w.ref("videos/"+s).put(t);e.push(n),n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);Ae(t)}),(function(e){console.log(e)}),(function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(w.ref("videos").child(s).getDownloadURL().then((function(e){Te(e),ke((function(t){return[].concat(u()(t),[e])}))})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}))}));case 9:case"end":return i.stop()}}),null,null,null,Promise)},children:"\u0e2a\u0e48\u0e07\u0e27\u0e34\u0e14\u0e35\u0e42\u0e2d"})})})]})]})]})},T=g.a.create({Img:{height:50,width:50,borderRadius:25},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},titleText:{textAlign:"center",backgroundColor:"#0089FC",fontSize:20,padding:5,color:"#fff",height:40},notiText:{textAlign:"center",backgroundColor:"red",fontSize:10,padding:5,marginTop:5,marginRight:5,color:"#fff",height:20,width:20,borderRadius:10},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},button:{justifyContent:"center",width:250,height:40,borderRadius:10}}),I=function(e){var t=e.navigation;return Object(_.jsxs)(x.a,{style:U.container,children:[Object(_.jsx)(O.a,{source:n(326),resizeMode:"contain",style:U.logo1}),Object(_.jsxs)(x.a,{style:[U.containerrow,{flexDirection:"row"}],children:[Object(_.jsx)(m.a,{title:"Live Chat",style:U.button,color:"#EE0000",onPress:function(){return t.navigate("Chat")}}),"\xa0 \xa0 \xa0 \xa0",Object(_.jsx)(m.a,{title:"History",style:U.button,color:"#EE0000",width:"250",height:"100",onPress:function(){return t.navigate("History")}})]})]})},U=g.a.create({button:{width:250,height:100,marginTop:20},container:{flex:1,backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},containerrow:{backgroundColor:"rgba(0,102,204,1)",alignItems:"center",padding:10},logo1:{height:150,width:220}}),R=n(246),M=n(58),F=n(132),E=n(94),L=n(380),N=n(115),V=n(241),z=n.n(V),W=n(242),J=n(148),q=function(e){var t=e.apiData,n=e.fileName;return Object(_.jsx)("button",{onClick:function(e){return function(e,t){var n={Sheets:{data:J.a.json_to_sheet(e)},SheetNames:["data"]},r=J.b(n,{bookType:"xlsx",type:"array"}),a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});W.saveAs(a,t+".xlsx")}(t,n)},style:{backgroundColor:"#145A32",height:40,borderRadius:10,color:"#ffffff"},children:"Download Excel"})},B=function(e){e.navigation;var t=Object(r.useState)(!1),n=h()(t,2),o=n[0],c=n[1],s=Object(r.useState)([]),i=h()(s,2),l=i[0],u=i[1],d=Object(r.useState)(""),p=h()(d,2),g=p[0],m=p[1],v=Object(r.useState)(""),w=h()(v,2),P=w[0],A=w[1],D=Object(r.useState)(""),T=h()(D,2),I=T[0],U=T[1],V=Object(r.useState)(""),W=h()(V,2),J=(W[0],W[1]),B=Object(r.useState)(""),H=h()(B,2),K=H[0],Y=H[1],X=Object(r.useState)(""),Z=h()(X,2),Q=Z[0],$=Z[1],ee=Object(r.useState)(""),te=h()(ee,2),ne=(te[0],te[1]),re=Object(r.useState)(""),ae=h()(re,2),oe=(ae[0],ae[1]),ce="",se=Object(r.useState)(""),ie=h()(se,2),le=ie[0],ue=ie[1],de=Object(r.useState)([]),he=h()(de,2),pe=he[0],fe=he[1],be=Object(r.useState)([]),ge=h()(be,2),je=ge[0],xe=ge[1],Oe=Object(r.useState)([]),me=h()(Oe,2),ve=me[0],ye=me[1],we=Object(r.useState)([]),Se=h()(we,2),Ce=Se[0],ke=Se[1],_e=Object(r.useState)([]),Pe=h()(_e,2),Ae=Pe[0],De=Pe[1],Te=Object(r.useState)([]),Ie=h()(Te,2),Ue=Ie[0],Re=Ie[1],Me=Object(r.useState)([]),Fe=h()(Me,2),Ee=Fe[0],Le=Fe[1],Ne=Object(r.useState)([]),Ve=h()(Ne,2),ze=Ve[0],We=Ve[1],Je=Object(r.useState)([]),qe=h()(Je,2),Be=qe[0],Ge=qe[1],He=Object(r.useState)([]),Ke=h()(He,2),Ye=Ke[0],Xe=Ke[1],Ze=Object(r.useState)([]),Qe=h()(Ze,2),$e=Qe[0],et=Qe[1],tt=Object(r.useState)([]),nt=h()(tt,2),rt=nt[0],at=nt[1],ot=a.a.useState([]),ct=h()(ot,2),st=ct[0],it=ct[1];a.a.useEffect((function(){z.a.get("https://school.treesbot.com/pepsichat/export_chat_all.php").then((function(e){return it(e.data)}))}),[]);var lt=function(e){var t,n,r;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={menu:e},a.prev=1,a.next=4,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_menu.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,f.a.awrap(n.json());case 7:r=a.sent,"group1"==e?(fe(r),xe(r),ht(r[0].displayimage,r[0].shopname,r[0].shopcode,r[0].tell,r[0].address,r[0].chatname,r[0].menu),jt(r[0].shopcode)):"group2"==e?(ye(r),ke(r)):"group3"==e?(De(r),Re(r)):"group4"==e?(Le(r),We(r)):"group5"==e?(Ge(r),Xe(r)):""==e&&(et(r),at(r)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)};Object(r.useEffect)((function(){lt("group1"),lt("group2"),lt("group3"),lt("group4"),lt("group5"),lt("")}),[]);var ut=function(e){if(e){var t=je.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),n=Ce.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),r=Ue.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),a=ze.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),o=Ye.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1})),c=rt.filter((function(t){var n=t.shopcode?t.shopcode.toUpperCase():"".toUpperCase(),r=e.toUpperCase();return n.indexOf(r)>-1}));fe(t),ye(n),De(r),Le(a),Ge(o),et(c),ue(e)}else fe(je),ye(Ce),De(Ue),Le(ze),Ge(Ye),et(rt),ue(e)},dt=function(e){ce=e,c(!0),function(){var e;f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=y.collection(ce).orderBy("createdAt","desc").onSnapshot((function(e){return u(e.docs.map((function(e){return{_id:e.data()._id,createdAt:e.data().createdAt.toDate(),text:e.data().text,user:e.data().user,image:e.data().image,video:e.data().video}})))})),t.abrupt("return",(function(){return e}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}()};var ht=function(e,t,n,r,a,o,c){ce=o,m(n+" ("+t+")"),A(e),J(t),U(n),Y(r),$(a),ne(o),oe(c),jt(n)},pt=Object(r.useState)([]),ft=h()(pt,2),bt=ft[0],gt=ft[1],jt=function(e){var t,n,r;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={shopcode:e},a.prev=1,a.next=4,f.a.awrap(fetch("https://school.treesbot.com/pepsichat/select_user_shopcode.php",{method:"POST",body:JSON.stringify(t)}));case 4:return n=a.sent,a.next=7,f.a.awrap(n.json());case 7:r=a.sent,gt(r),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.error(a.t0);case 14:case"end":return a.stop()}}),null,null,[[1,11]],Promise)},xt=function(e){var t="";return"group1"==e?t="\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48":"group2"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25":"group3"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46":"group4"==e?t="\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b":"group5"==e?t="\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a":""==e&&(t="\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32"),t};return Object(_.jsxs)(x.a,{style:[G.container,{flexDirection:"row"}],children:[Object(_.jsxs)(x.a,{style:G.container,children:[Object(_.jsx)(q,{apiData:st,fileName:"Export_Chat_Report"}),Object(_.jsx)(C.a,{lightTheme:!0,round:!0,searchIcon:{size:24},onChangeText:function(e){return ut(e)},onClear:function(e){return ut("")},placeholder:"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32...",value:le}),Object(_.jsx)(b.a,{ItemSeparatorComponent:function(){return Object(_.jsx)(x.a,{style:G.listItemSeparatorStyle})},sections:[{title:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e08\u0e32\u0e01\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b\u0e15\u0e39\u0e49\u0e41\u0e0a\u0e48",data:pe},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21, \u0e15\u0e34\u0e14\u0e15\u0e32\u0e21 \u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e41\u0e25\u0e01\u0e02\u0e2d\u0e07\u0e23\u0e32\u0e07\u0e27\u0e31\u0e25",data:ve},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e2b\u0e23\u0e37\u0e2d\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e2d\u0e1e\u0e1e\u0e25\u0e34\u0e40\u0e04\u0e0a\u0e31\u0e48\u0e19\u0e14\u0e49\u0e32\u0e19\u0e2d\u0e37\u0e48\u0e19\u0e46",data:Ae},{title:"\u0e2a\u0e2d\u0e1a\u0e16\u0e32\u0e21\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e17\u0e31\u0e48\u0e27\u0e44\u0e1b",data:Ee},{title:"\u0e41\u0e2d\u0e14 LINE \u0e40\u0e1b\u0e4a\u0e1b\u0e0b\u0e35\u0e48\u0e41\u0e1f\u0e19\u0e04\u0e25\u0e31\u0e1a",data:Be},{title:"\u0e44\u0e21\u0e48\u0e44\u0e14\u0e49\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e31\u0e27\u0e02\u0e49\u0e2d\u0e2a\u0e19\u0e17\u0e19\u0e32",data:$e}],renderSectionHeader:function(e){var t=e.section;return Object(_.jsxs)(j.a,{style:G.groupText,children:[" ",t.title," "]})},renderItem:function(e){var t=e.item;return Object(_.jsxs)(x.a,{style:{flex:1,flexDirection:"row",marginLeft:20},children:[Object(_.jsx)(O.a,{source:{uri:t.displayimage},style:G.Img}),Object(_.jsxs)(j.a,{style:G.sectionListItemStyle,onPress:function(){return ht(t.displayimage,t.shopname,t.shopcode,t.tell,t.address,t.chatname,t.menu)},children:[t.shopcode," (",t.shopname,")"]})]})},keyExtractor:function(e,t){return t}})]}),Object(_.jsxs)(x.a,{style:{flex:2,backgroundColor:"#0089FC"},children:[Object(_.jsx)(M.a,{animationType:"slide",transparent:!0,visible:o,onRequestClose:function(){R.a.alert("Modal has been closed."),c(!o)},children:Object(_.jsx)(x.a,{style:G.centeredView,children:Object(_.jsxs)(x.a,{style:G.modalView,children:[Object(_.jsx)(S.b,{messages:l,showAvatarForEveryMessage:!0,renderMessageVideo:function(e){var t=e.currentMessage;return Object(_.jsx)(x.a,{style:{position:"relative",height:150,width:250},children:Object(_.jsx)(k.a,{resizeMode:"cover",height:150,width:250,useNativeControls:!0,shouldPlay:!1,source:{uri:t.video},style:G.video})})},user:{_id:"Admin",name:"Admin",avatar:"https://static-s.aa-cdn.net/img/gp/20600014266053/JVWGO91AFGOSfDoqO3V_YlUiWnCoiyob0aPkVOss0qASb26aRbXvWiiNK12ZFLxfsSw=s300?v=1"},renderInputToolbar:function(){return null}}),Object(_.jsx)(F.a,{style:[G.button,G.buttonClose],onPress:function(){return c(!o)},children:Object(_.jsx)(j.a,{style:G.textStyle,children:"\u0e1b\u0e34\u0e14"})})]})})}),Object(_.jsxs)(x.a,{style:{backgroundColor:"white",flexDirection:"row",height:150,padding:0,borderRadius:20,marginTop:20,marginLeft:20,marginRight:20},children:[Object(_.jsx)(x.a,{style:{flex:1},children:Object(_.jsx)(O.a,{source:{uri:P},style:G.Img2})}),Object(_.jsxs)(x.a,{style:{flex:2},children:[Object(_.jsx)(j.a,{style:G.titleText,children:Object(_.jsx)("b",{children:g})}),Object(_.jsxs)(j.a,{style:G.titleText,children:["\u0e23\u0e2b\u0e31\u0e2a\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32 : ",I]}),Object(_.jsxs)(j.a,{style:G.titleText,children:["\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d : ",K]}),Object(_.jsxs)(j.a,{style:G.titleText,children:["\u0e17\u0e35\u0e48\u0e2d\u0e22\u0e39\u0e48 : ",Q]})]})]}),Object(_.jsx)(x.a,{style:{backgroundColor:"white",flexDirection:"row",borderRadius:20,marginTop:10,marginLeft:20,marginRight:20,marginBottom:10},children:Object(_.jsxs)(L.a,{children:[Object(_.jsxs)(L.a.Header,{children:[Object(_.jsx)(L.a.Title,{style:{flex:1},children:"No"}),Object(_.jsx)(L.a.Title,{style:{flex:2},children:"Date"}),Object(_.jsx)(L.a.Title,{style:{flex:3},children:"Message"}),Object(_.jsx)(L.a.Title,{style:{flex:1},children:"Action"})]}),Object(_.jsx)(E.a,{data:bt,renderItem:function(e){var t=e.item;return Object(_.jsxs)(L.a.Row,{children:[Object(_.jsx)(L.a.Cell,{style:{flex:1},children:t.num}),Object(_.jsx)(L.a.Cell,{style:{flex:2},children:t.dateinsert}),Object(_.jsx)(L.a.Cell,{style:{flex:3},children:xt(t.menu)}),Object(_.jsx)(L.a.Cell,{style:{flex:1},children:Object(_.jsx)(N.a,{icon:"eye",color:"blue",size:20,onPress:function(){return dt(t.chatname)}})})]})}})]})})]})]})},G=g.a.create({Img:{height:50,width:50,borderRadius:25},Img2:{marginTop:25,marginLeft:50,height:100,width:100,borderRadius:75},namechats:{alignItems:"center",backgroundColor:"#0089FC",height:40},container:{flex:1,justifyContent:"center",backgroundColor:"white"},container2:{backgroundColor:"white",height:400,width:600},groupText:{backgroundColor:"gray",fontSize:18,padding:5,color:"white"},titleText:{fontSize:16,padding:5,color:"black"},sectionListItemStyle:{fontSize:15,padding:15,color:"#000",backgroundColor:"white"},listItemSeparatorStyle:{height:.5,width:"100%",backgroundColor:"#C8C8C8"},centeredView:{flex:1,justifyContent:"center",alignItems:"center",marginTop:22},modalView:{flex:1,margin:20,backgroundColor:"white",borderRadius:20,width:500,height:500,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},button:{borderRadius:20,padding:10,elevation:2},buttonOpen:{backgroundColor:"#F194FF"},buttonClose:{backgroundColor:"#2196F3"},textStyle:{color:"white",fontWeight:"bold",textAlign:"center"},modalText:{marginBottom:15,textAlign:"center"}}),H=Object(o.a)();function K(){return Object(_.jsx)(c.a,{children:Object(_.jsxs)(H.Navigator,{screenOptions:{headerTitleAlign:"center"},children:[Object(_.jsx)(H.Screen,{name:"Menu",component:I}),Object(_.jsx)(H.Screen,{name:"Chat",component:D}),Object(_.jsx)(H.Screen,{name:"History",component:B})]})})}},261:function(e,t,n){e.exports=n(354)},326:function(e,t,n){e.exports=n.p+"static/media/Pepsi-Logo.32560c85.png"}},[[261,1,2]]]);
//# sourceMappingURL=app.f3b82de6.chunk.js.map